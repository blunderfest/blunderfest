

:root{
    --ease-elastic-3: var(--ease-elastic-out-3);
    --ease-elastic-4: var(--ease-elastic-out-4);
    --ease-3: cubic-bezier(.25, 0, .3, 1);
    --ease-out-5: cubic-bezier(0, 0, 0, 1);
    --indigo-3: #91a7ff;
    --purple-3: #e599f7;
    --gray-1: #f1f3f5;
    --gray-4: #ced4da;
    --gray-9: #212529;
    --gray-8: #343a40;
    --gray-7: #495057;
    --gray-6: #868e96;
    --gray-2: #e9ecef;
    --gray-3: #dee2e6;
    --size-3: 1rem;
    --ratio-square: 1;
    --ease-elastic-out-3: cubic-bezier(.5, 1.25, .75, 1.25);
    --ease-elastic-out-4: cubic-bezier(.5, 1.5, .75, 1.25);
}

@layer reset, colors, utilities, components;

.sun-and-moon {
    &> :is(.moon, .sun, .sun-beams) {
        transform-origin: center center;
    }

    &> :is(.moon, .sun) {
        fill: var(--icon-fill);

        .theme-toggle:is(:hover, :focus-visible)>& {
            fill: var(--icon-fill-hover);
        }
    }

    &>.sun-beams {
        stroke: var(--icon-fill);
        stroke-width: 2px;

        .theme-toggle:is(:hover, :focus-visible) & {
            stroke: var(--icon-fill-hover);
        }
    }

    [data-theme="dark"] & {
        &>.sun {
            transform: scale(1.75);
        }

        &>.sun-beams {
            opacity: 0;
        }

        &>.moon>circle {
            transform: translateX(-7px);

            @supports (cx: 1) {
                transform: translateX(0);
                cx: 17;
            }
        }
    }

    @media (--motionOK) {
        &>.sun {
            transition: transform .5s var(--ease-elastic-3);
        }

        &>.sun-beams {
            transition:
                transform .5s var(--ease-elastic-4),
                opacity .5s var(--ease-3);
        }

        & .moon>circle {
            transition: transform .25s var(--ease-out-5);

            @supports (cx: 1) {
                transition: cx .25s var(--ease-out-5);
            }
        }

        [data-theme="dark"] & {
            &>.sun {
                transform: scale(1.75);
                transition-timing-function: var(--ease-3);
                transition-duration: .25s;
            }

            &>.sun-beams {
                transform: rotateZ(-25deg);
                transition-duration: .15s;
            }

            &>.moon>circle {
                transition-delay: .25s;
                transition-duration: .5s;
            }
        }
    }
}

.theme-toggle {
    --size: 2rem;
    --icon-fill: hsl(210 10% 30%);
    --icon-fill-hover: hsl(210 10% 15%);

    background: none;
    border: none;
    padding: 0;

    inline-size: var(--size);
    block-size: var(--size);
    aspect-ratio: 1;
    border-radius: 50%;

    cursor: pointer;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;

    outline-offset: 5px;

    &>svg {
        inline-size: 100%;
        block-size: 100%;
        stroke-linecap: round;
    }

    [data-theme="dark"] & {
        --icon-fill: hsl(210 10% 70%);
        --icon-fill-hover: hsl(210 15% 90%);
    }

    @media (hover: none) {
        --size: 48px;
    }
}

@layer reset{

    /* https://andy-bell.co.uk/a-more-modern-css-reset/ */

    /* Box sizing rules */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    /* Prevent font size inflation */
    html {
        -moz-text-size-adjust: none;
        -webkit-text-size-adjust: none;
        text-size-adjust: none;
    }

    /* Remove default margin in favour of better control in authored CSS */
    body,
    h1,
    h2,
    h3,
    h4,
    p,
    figure,
    blockquote,
    dl,
    dd {
        margin-block-end: 0;
    }

    /* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */
    ul[role='list'],
    ol[role='list'] {
        list-style: none;
    }

    /* Set core body defaults */
    body {
        min-height: 100vh;
        line-height: 1.5;
    }

    /* Set shorter line heights on headings and interactive elements */
    h1,
    h2,
    h3,
    h4,
    button,
    input,
    label {
        line-height: 1.1;
    }

    /* Balance text wrapping on headings */
    h1,
    h2,
    h3,
    h4 {
        text-wrap: balance;
    }

    /* A elements that don't have a class get default styles */
    a:not([class]) {
        -webkit-text-decoration-skip: ink;
                text-decoration-skip-ink: auto;
        color: currentColor;
    }

    /* Make images easier to work with */
    img,
    picture {
        max-width: 100%;
        display: block;
    }

    /* Inherit fonts for inputs and buttons */
    input,
    button,
    textarea,
    select {
        font: inherit;
    }

    /* Make sure textareas without a rows attribute are not tiny */
    textarea:not([rows]) {
        min-height: 10em;
    }

    /* Anything that has been anchored to should have extra scroll margin */
    :target {
        scroll-margin-block: 5ex;
    }
}

@layer reset{

    @media (--motionNotOK) {

        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
    }
}

@layer colors{

    :where(html[data-theme="dark"]) {
        color-scheme: dark;

        --link: var(--indigo-3);
        --link-visited: var(--purple-3);

        --text-1: var(--gray-1);
        --text-2: var(--gray-4);

        --surface-1: var(--gray-9);
        --surface-2: var(--gray-8);
        --surface-3: var(--gray-7);
        --surface-4: var(--gray-6);

        --scrollthumb-color: var(--gray-6);
    }

    :where(html[data-theme="light"]) {
        color-scheme: light;

        --link: var(--indigo-3);
        --link-visited: var(--purple-3);

        --text-1: var(--gray-1);
        --text-2: var(--gray-4);

        --surface-1: var(--gray-1);
        --surface-2: var(--gray-2);
        --surface-3: var(--gray-3);
        --surface-4: var(--gray-4);

        --scrollthumb-color: var(--gray-6);
    }
}

@layer utilities{

    .flex {
        display: flex;
        gap: var(--size-3);
    }

    .grid {
        display: grid;
        gap: var(--size-3);
    }

    .square {
        aspect-ratio: var(--ratio-square);
    }

    /* https: //blog.logrocket.com/design-accessibility-css-visually-hidden-class/ */
    .visually-hidden:not(:focus):not(:active) {
        border: 0;
        clip: rect(0 0 0 0);
        height: auto;
        margin: 0;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
        white-space: nowrap;
    }
}

@layer components{
.button {
        background-color: var(--surface-2);
    }
}

label {
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
}